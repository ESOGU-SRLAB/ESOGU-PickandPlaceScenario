<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:macro name="rs005l" params="
    name
    parent
    *origin
    use_fake_hardware:=false
    tf_prefix
    generate_ros2_control_tag:=true
    sim_ignition:=false
    ">
  
    <!-- <gazebo reference="world">
    </gazebo>
    <gazebo>
      <plugin filename="gz_ros2_control-system" name="gz_ros2_control::GazeboSimROS2ControlPlugin">
        <parameters>$(find rs005l_description)/config/rs005l_controllers.yaml</parameters>
        <controller_manager_node_name>controller_manager</controller_manager_node_name>
      </plugin>
    </gazebo> -->
    <xacro:if value="${generate_ros2_control_tag}">
      <!-- ros2 control include -->
      <xacro:include filename="$(find rs005l_description)/urdf/rs005l.ros2_control.xacro" />
      <!-- ros2 control instance -->
      <xacro:rs005l_ros2_control
        name="${name}"
        use_fake_hardware="${use_fake_hardware}"
        tf_prefix="${tf_prefix}"
        sim_ignition="${sim_ignition}"
      />
    </xacro:if>    

    <link name="${tf_prefix}base_link">
      <inertial>
        <origin xyz="1.1505E-05 -0.019688 0.078274" rpy="0 0 0"/>
        <mass value="4.7488"/>
        <inertia ixx="25601325E-09" ixy="-4605E-09" ixz="-2849E-09" iyy="19099564E-09" iyz="1047762E-09" izz="23817354E-09"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/base_link.STL"/>
        </geometry>
        <material name="">
          <color rgba="0.79216 0.81961 0.93333 1"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/base_link.STL"/>
        </geometry>
      </collision>
    </link>

    <xacro:if value="${parent == 'world'}">
      <joint name="${tf_prefix}world_joint" type="fixed">
        <parent link="world"/>
        <child link="${tf_prefix}base_link"/>
      </joint>
    </xacro:if>

    <xacro:unless value="${parent == 'world'}">
      <joint name="${tf_prefix}mount_joint" type="fixed">
        <parent link="${parent}"/>
        <child link="${tf_prefix}base_link"/>
        <insert_block name="origin"/>
      </joint>
    </xacro:unless>

    <link name="${tf_prefix}link1">
      <inertial>
        <origin xyz="-0.00097552 0.037898 -0.053468" rpy="0 0 0"/>
        <mass value="5.4813"/>
        <inertia ixx="38224072E-09" ixy="-1337909E-09" ixz="-754607E-09" iyy="47377782E-09" iyz="10312809E-09" izz="58980200E-09"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link1.STL"/>
        </geometry>
        <material name="">
          <color rgba="0.79216 0.81961 0.93333 1"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link1.STL"/>
        </geometry>
      </collision>
    </link>

    <joint name="${tf_prefix}joint1" type="revolute">
      <origin xyz="0 0 0.295" rpy="0 0 0"/>
      <limit effort="104" velocity="1.57" lower="-3.14" upper="3.14"/>
      <parent link="${tf_prefix}base_link"/>
      <child link="${tf_prefix}link1"/>
      <axis xyz="0 0 -1"/>
      <dynamics friction="0.1"/>
    </joint>

    <link name="${tf_prefix}link2">
      <inertial>
        <origin xyz="0.15478 0.0052526 -0.00198" rpy="0 0 0"/>
        <mass value="7.3249"/>
        <inertia ixx="44698118E-09" ixy="-4137442E-09" ixz="572902E-09" iyy="172451954E-09" iyz="-87374E-09" izz="144618291E-09"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link2.STL"/>
        </geometry>
        <material name="">
          <color rgba="0.79216 0.81961 0.93333 1"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link2.STL"/>
        </geometry>
      </collision>
    </link>

    <joint name="${tf_prefix}joint2" type="revolute">
      <origin xyz="0 0.105 0" rpy="0 -1.57079 0"/>
      <limit effort="104" velocity="10.57" lower="-1.4" upper="2.36"/>
      <parent link="${tf_prefix}link1"/>
      <child link="${tf_prefix}link2"/>
      <axis xyz="0 0 1"/>
      <dynamics friction="0.1"/>
    </joint>

    <link name="${tf_prefix}link3">
      <inertial>
        <origin xyz="-4.4253E-07 -0.048212 0.016674" rpy="0 0 0"/>
        <mass value="5.4014"/>
        <inertia ixx="33475873E-09" ixy="1E-09" ixz="-65E-09" iyy="26920515E-09" iyz="-4820976E-09" izz="26053508E-09"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link3.STL"/>
        </geometry>
        <material name="">
          <color rgba="0.79216 0.81961 0.93333 1"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link3.STL"/>
        </geometry>
      </collision>
    </link>

    <joint name="${tf_prefix}joint3" type="revolute">
      <origin xyz="0.38 0 0" rpy="0 0 0"/>
      <limit effort="69" velocity="1.57" lower="-3" upper="2.06"/>
      <parent link="${tf_prefix}link2"/>
      <child link="${tf_prefix}link3"/>
      <axis xyz="0 0 -1"/>
      <dynamics friction="0.1"/>
    </joint>

    <link name="${tf_prefix}link4">
      <inertial>
        <origin xyz="0.00052459 -4.4696E-07 0.13588" rpy="0 0 0"/>
        <mass value="1.6435"/>
        <inertia ixx="11700665E-09" ixy="-20E-09" ixz="108029E-09" iyy="12467439E-09" iyz="-42E-09" izz="2335596E-09"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link4.STL"/>
        </geometry>
        <material name="">
          <color rgba="0.79216 0.81961 0.93333 1"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link4.STL"/>
        </geometry>
      </collision>
    </link>

    <joint name="${tf_prefix}joint4" type="revolute">
      <origin xyz="0.15 -0.08 0" rpy="0 1.57079 0"/>
      <limit effort="69" velocity="1.57" lower="-6.28" upper="6.28"/>
      <parent link="${tf_prefix}link3"/>
      <child link="${tf_prefix}link4"/>
      <axis xyz="0 0 1"/>
      <dynamics friction="0.1"/>
    </joint>

    <link name="${tf_prefix}link5">
      <inertial>
        <origin xyz="0.01791 -0.00069789 4.5441E-08" rpy="0 0 0"/>
        <mass value="0.35804"/>
        <inertia ixx="202633E-09" ixy="0E-09" ixz="778E-09" iyy="407754E-09" iyz="0E-09" izz="430122E-09"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link5.STL"/>
        </geometry>
        <material name="">
          <color rgba="0.79216 0.81961 0.93333 1"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link5.STL"/>
        </geometry>
      </collision>
    </link>

    <joint name="${tf_prefix}joint5" type="revolute">
      <origin xyz="0 0 0.26" rpy="0 -1.57079 0"/>
      <limit effort="34" velocity="1.57" lower="-2.53" upper="2.53"/>
      <parent link="${tf_prefix}link4"/>
      <child link="${tf_prefix}link5"/>
      <axis xyz="0 0 -1"/>
      <dynamics friction="0.1"/>
    </joint>

    <link name="${tf_prefix}link6">
      <inertial>
        <origin xyz="5.0628E-17 -4.215E-14 0.074772" rpy="0 0 0"/>
        <mass value="0.0065669"/>
        <inertia ixx="743E-09" ixy="0E-09" ixz="0E-09" iyy="743E-09" iyz="0E-09" izz="1448E-09"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0.078" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link6.STL"/>
        </geometry>
        <material name="">
          <color rgba="0.79216 0.81961 0.93333 1"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0.078" rpy="0 0 0"/>
        <geometry>
          <mesh filename="file:////home/cem/colcon_ws/src/rs005l_description/meshes/link6.STL"/>
        </geometry>
      </collision>
    </link>

    <joint name="${tf_prefix}joint6" type="revolute">
      <origin xyz="0 0 0" rpy="0 1.57079 0"/>
      <limit effort="34" velocity="1.57" lower="-6.28" upper="6.28"/>
      <parent link="${tf_prefix}link5"/>
      <child link="${tf_prefix}link6"/>
      <axis xyz="0 0 1"/>
      <dynamics friction="0.1"/>
    </joint>

    <transmission name="tran1">
      <plugin>transmission_interface/SimpleTransmission</plugin>
      <joint name="${tf_prefix}joint1">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor1">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>6</mechanicalReduction>
      </actuator>
    </transmission>

    <transmission name="tran2">
      <plugin>transmission_interface/SimpleTransmission</plugin>
      <joint name="${tf_prefix}joint2">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor2">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>6</mechanicalReduction>
      </actuator>
    </transmission>

    <transmission name="tran3">
      <plugin>transmission_interface/SimpleTransmission</plugin>
      <joint name="${tf_prefix}joint3">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor3">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>6</mechanicalReduction>
      </actuator>
    </transmission>

    <transmission name="tran4">
      <plugin>transmission_interface/SimpleTransmission</plugin>
      <joint name="${tf_prefix}joint4">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor4">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>

    <transmission name="tran5">
      <plugin>transmission_interface/SimpleTransmission</plugin>
      <joint name="${tf_prefix}joint5">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor5">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>4</mechanicalReduction>
      </actuator>
    </transmission>

    <transmission name="tran6">
      <plugin>transmission_interface/SimpleTransmission</plugin>
      <joint name="${tf_prefix}joint6">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      </joint>
      <actuator name="motor6">
        <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
    </transmission>
  </xacro:macro>
</robot>



